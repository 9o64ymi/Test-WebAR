<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Image Target WebAR</title>
  <!-- Include mind-ar.js -->
  <script src="https://cdn.jsdelivr.net/npm/mind-ar/dist/mindar-image-three.prod.js"></script>
  <!-- Include Three.js -->
  <script src="https://cdn.jsdelivr.net/npm/three@0.153.0/build/three.min.js"></script>
</head>
<body style="margin: 0; overflow: hidden;">
  <div id="ar-container"></div>
  <script>
    // Initialize mind-ar.js
    const mindAR = new window.MINDAR.IMAGE.MindARThree({
      container: document.querySelector("#ar-container"),
      imageTargetSrc: "./targets.mind", // Path to your .mind file
    });

    const { renderer, scene, camera } = mindAR;

    // Create a 3D object
    const geometry = new THREE.BoxGeometry(0.5, 0.5, 0.5);
    const material = new THREE.MeshBasicMaterial({ color: 0x00ff00 });
    const box = new THREE.Mesh(geometry, material);
    box.visible = false;
    scene.add(box);

    mindAR.onTargetFound = () => {
      console.log("Target found!");
      box.visible = true;
    };

    mindAR.onTargetLost = () => {
      console.log("Target lost!");
      box.visible = false;
    };

    // Start AR session
    mindAR.start().catch((error) => {
      console.error("Failed to start AR session:", error);
    });

    // Render the scene
    renderer.setAnimationLoop(() => {
      box.rotation.y += 0.01;
      renderer.render(scene, camera);
    });
  </script>
</body>
</html>
